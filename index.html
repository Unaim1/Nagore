<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Yincana sorpresa ‚Äî Nagore</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#f59e0b;
      --accent2:#3b82f6;
      --muted:#94a3b8;
      --glass:rgba(255,255,255,0.04);
      --success:#10b981;
    }
    html,body{
      height:100%;
      margin:0;
      font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;
    }
    body{
      background:linear-gradient(180deg,#071025 0%, #0f1724 100%);
      color:#e6eef8;
      padding:20px;
      min-height:100vh;
    }
    .wrap{
      max-width:1200px;
      margin:0 auto;
      width:100%;
    }
    header{
      display:flex;
      align-items:center;
      gap:16px;
      margin-bottom:24px;
      flex-wrap:wrap;
    }
    .logo{
      width:64px;
      height:64px;
      border-radius:12px;
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:36px;
      box-shadow:0 6px 24px rgba(0,0,0,.6);
      flex-shrink:0;
    }
    h1{
      margin:0;
      font-size:clamp(20px, 4vw, 28px);
    }
    p.lead{
      margin:8px 0 0;
      color:var(--muted);
      font-size:clamp(14px, 2vw, 16px);
      max-width:800px;
    }

    .progress{
      display:flex;
      gap:6px;
      align-items:center;
      margin:24px 0;
      flex-wrap:wrap;
    }
    .dot{
      width:10px;
      height:10px;
      border-radius:50%;
      background:rgba(255,255,255,.06);
      transition:all 0.3s;
    }
    .dot.on{
      background:linear-gradient(90deg,var(--accent),var(--accent2));
      transform:scale(1.2);
    }

    .board{
      display:grid;
      grid-template-columns:repeat(auto-fill, minmax(300px, 1fr));
      gap:20px;
      margin-bottom:30px;
    }
    .card{
      background:linear-gradient(180deg,var(--card),#071226);
      border-radius:12px;
      padding:20px;
      box-shadow:0 8px 30px rgba(2,6,23,.6);
      border:1px solid rgba(255,255,255,0.05);
      transition:all 0.3s;
    }
    .card.unlocked{
      border-color:rgba(59, 130, 246, 0.3);
    }
    .card.solved{
      border-color:rgba(16, 185, 129, 0.3);
    }
    .card h2{
      margin:0 0 12px;
      font-size:18px;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .card-number{
      background:var(--accent);
      color:#071226;
      width:24px;
      height:24px;
      border-radius:50%;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-size:14px;
      font-weight:bold;
    }
    .hint{
      color:var(--muted);
      font-size:14px;
      margin-bottom:16px;
      line-height:1.5;
    }

    input[type=text], input[type=number], select{
      width:100%;
      padding:12px 16px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.1);
      background:var(--glass);
      color:inherit;
      font-size:16px;
      margin-bottom:12px;
      box-sizing:border-box;
    }
    button{
      cursor:pointer;
      padding:12px 20px;
      border-radius:8px;
      border:0;
      background:linear-gradient(90deg,var(--accent),var(--accent2));
      color:#071226;
      font-weight:700;
      font-size:16px;
      transition:transform 0.2s, opacity 0.2s;
    }
    button:hover{
      transform:translateY(-2px);
      opacity:0.95;
    }
    button:active{
      transform:translateY(0);
    }
    button.small{
      font-size:14px;
      padding:10px 16px;
    }
    button.secondary{
      background:var(--glass);
      color:var(--muted);
      border:1px solid rgba(255,255,255,.1);
    }

    .btn-group{
      display:flex;
      gap:10px;
      margin-top:10px;
      flex-wrap:wrap;
    }

    .result{
      margin-top:12px;
      padding:10px;
      border-radius:8px;
      font-size:14px;
      display:none;
    }
    .result.success{
      display:block;
      background:rgba(16, 185, 129, 0.1);
      color:var(--success);
      border:1px solid rgba(16, 185, 129, 0.2);
    }
    .result.error{
      display:block;
      background:rgba(239, 68, 68, 0.1);
      color:#ef4444;
      border:1px solid rgba(239, 68, 68, 0.2);
    }

    .options-grid{
      display:grid;
      grid-template-columns:repeat(2, 1fr);
      gap:10px;
      margin:15px 0;
    }
    .option-btn{
      width:100%;
      text-align:left;
    }
    
    .locked-message {
      color: var(--muted);
      font-style: italic;
      text-align: center;
      padding: 20px;
      background: rgba(255,255,255,0.05);
      border-radius: 8px;
      margin: 15px 0;
    }

    footer{
      margin-top:30px;
      color:var(--muted);
      font-size:14px;
      text-align:center;
      padding-top:20px;
      border-top:1px solid rgba(255,255,255,.05);
    }

    /* Modal para felicitaciones y modal final */
    .modal{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(2,6,23,.85);
      backdrop-filter:blur(4px);
      visibility:hidden;
      opacity:0;
      transition:all .3s;
      z-index:1000;
      padding:20px;
    }
    .modal.show{
      visibility:visible;
      opacity:1;
    }
    .ticket{
      background:linear-gradient(180deg,#fff,#f3f4f6);
      color:#061126;
      padding:32px;
      border-radius:16px;
      max-width:500px;
      width:100%;
      box-shadow:0 30px 80px rgba(2,6,23,.8);
      text-align:center;
      animation:ticketReveal 0.5s ease-out;
    }
    @keyframes ticketReveal{
      0%{transform:scale(0.8); opacity:0;}
      100%{transform:scale(1); opacity:1;}
    }
    .ticket h2{
      margin:16px 0;
      font-size:24px;
    }
    .ticket h3{
      margin:10px 0;
      font-size:20px;
      color:#3b82f6;
    }
    .big{
      font-size:22px;
      font-weight:800;
      margin:20px 0;
    }
    .emoji{
      font-size:48px;
      animation:float 3s ease-in-out infinite;
    }
    @keyframes float{
      0%, 100%{transform:translateY(0);}
      50%{transform:translateY(-10px);}
    }
    .progress-text{
      font-size:16px;
      margin:15px 0;
      color:#64748b;
    }
    .destination-hint{
      font-size:18px;
      font-weight:bold;
      margin:20px 0;
      color:#0f172a;
    }

    /* Responsive */
    @media(max-width:768px){
      .board{
        grid-template-columns:1fr;
      }
      header{
        flex-direction:column;
        text-align:center;
        gap:12px;
      }
      .options-grid{
        grid-template-columns:1fr;
      }
      .ticket{
        padding:24px 20px;
      }
      .ticket h2{
        font-size:22px;
      }
      .ticket h3{
        font-size:18px;
      }
      .big{
        font-size:20px;
      }
      .emoji{
        font-size:40px;
      }
    }

    @media(max-width:480px){
      body{
        padding:15px;
      }
      .card{
        padding:16px;
      }
      .btn-group{
        flex-direction:column;
      }
      button, button.small{
        width:100%;
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">‚úàÔ∏è</div>
      <div>
        <h1>Yincana sorpresa ‚Äî Para <strong>Nagore</strong></h1>
        <p class="lead">Resuelve las 10 pistas paso a paso. Solo al final descubrir√°s el destino secreto. ¬°Buena suerte!</p>
      </div>
    </header>

    <div class="progress" aria-hidden>
      <div class="dot" id="p1"></div>
      <div class="dot" id="p2"></div>
      <div class="dot" id="p3"></div>
      <div class="dot" id="p4"></div>
      <div class="dot" id="p5"></div>
      <div class="dot" id="p6"></div>
      <div class="dot" id="p7"></div>
      <div class="dot" id="p8"></div>
      <div class="dot" id="p9"></div>
      <div class="dot" id="p10"></div>
    </div>

    <div class="board">
      <!-- Pista 1 -->
      <div class="card" id="card1">
        <h2><span class="card-number">1</span> Comienzo f√°cil</h2>
        <p class="hint">D√≠a que nos conocimos (n√∫mero del d√≠a)</p>
        <input type="number" id="ans1" placeholder="Escribe el n√∫mero">
        <div class="btn-group">
          <button onclick="checkAnswer(1)">Comprobar</button>
          <button class="small secondary" onclick="showHint(1)">Pista</button>
        </div>
        <div id="res1" class="result"></div>
      </div>

      <!-- Pista 2 -->
      <div class="card clue-locked" id="card2">
        <h2><span class="card-number">2</span> Odont√≥loga o fake?</h2>
        <p class="hint">Con ella raspas y eliminas el sarro que est√° pegado al diente.</p>
        <input type="text" id="ans2" placeholder="Escribe el instrumento">
        <div class="btn-group">
          <button onclick="checkAnswer(2)">Comprobar</button>
          <button class="small secondary" onclick="showHint(2)">Pista</button>
        </div>
        <div id="res2" class="result"></div>
      </div>

      <!-- Pista 3 -->
      <div class="card clue-locked" id="card3">
        <h2><span class="card-number">3</span> Capital europea</h2>
        <p class="hint">¬øCu√°l es la capital de Italia?</p>
        <div class="options-grid">
          <button class="option-btn" onclick="selectOption(3, 'Roma')">Roma</button>
          <button class="option-btn" onclick="selectOption(3, 'Mil√°n')">Mil√°n</button>
          <button class="option-btn" onclick="selectOption(3, 'N√°poles')">N√°poles</button>
          <button class="option-btn" onclick="selectOption(3, 'Florencia')">Florencia</button>
        </div>
        <div id="res3" class="result"></div>
      </div>

      <!-- Pista 4 - MODIFICADA: Adivinanza del color azul -->
      <div class="card clue-locked" id="card4">
        <h2><span class="card-number">4</span> Adivinanza del color</h2>
        <p class="hint">"Soy el color del cielo en un d√≠a despejado, y tambi√©n del mar cuando est√° tranquilo y sereno. ¬øQu√© color soy?"</p>
        <input type="text" id="ans4" placeholder="Escribe el color">
        <div class="btn-group">
          <button onclick="checkAnswer(4)">Comprobar</button>
          <button class="small secondary" onclick="showHint(4)">Pista</button>
        </div>
        <div id="res4" class="result"></div>
      </div>

      <!-- Pista 5 -->
      <div class="card clue-locked" id="card5">
        <h2><span class="card-number">5</span> Adivinanza dental</h2>
        <p class="hint">¬øCu√°l es el t√©rmino cl√≠nico para la p√©rdida de inserci√≥n del tejido conectivo y la migraci√≥n del epitelio hacia el √°pice?</p>
        <input type="text" id="ans5" placeholder="Escribe el t√©rmino">
        <div class="btn-group">
          <button onclick="checkAnswer(5)">Comprobar</button>
          <button class="small secondary" onclick="showHint(5)">Pista</button>
        </div>
        <div id="res5" class="result"></div>
      </div>

      <!-- Pista 6 - MODIFICADA: Matem√°ticas extremas -->
      <div class="card clue-locked" id="card6">
        <h2><span class="card-number">6</span> Matem√°ticas extremas</h2>
        <p class="hint">6 x 7 = ?</p>
        <input type="number" id="ans6" placeholder="Escribe el resultado">
        <div class="btn-group">
          <button onclick="checkAnswer(6)">Comprobar</button>
          <button class="small secondary" onclick="showHint(6)">Pista</button>
        </div>
        <div id="res6" class="result"></div>
      </div>

      <!-- Pista 7 -->
      <div class="card clue-locked" id="card7">
        <h2><span class="card-number">7</span> Cosas de dentistas</h2>
        <p class="hint">¬øCu√°l es el nombre gen√©rico o de marca m√°s reconocido para el instrumento de n√≠quel-titanio en forma de limas rotatorias que revolucion√≥ la instrumentaci√≥n de los conductos radiculares?</p>
        <div class="options-grid">
          <button class="option-btn" onclick="selectOption(7, 'Guttapercha')">Guttapercha</button>
          <button class="option-btn" onclick="selectOption(7, 'Lentulo')">Lentulo</button>
          <button class="option-btn" onclick="selectOption(7, 'ProTaper')">ProTaper</button>
          <button class="option-btn" onclick="selectOption(7, 'F√≥rceps')">F√≥rceps</button>
        </div>
        <div id="res7" class="result"></div>
      </div>

      <!-- Pista 8 -->
      <div class="card clue-locked" id="card8">
        <h2><span class="card-number">8</span> Aviones...?</h2>
        <p class="hint">El modelo m√°s com√∫n que el pesao de tu novio dice siempre cuando ve uno en el cielo</p>
        <input type="text" id="ans8" placeholder="Escribe el modelo">
        <div class="btn-group">
          <button onclick="checkAnswer(8)">Comprobar</button>
          <button class="small secondary" onclick="showHint(8)">Pista</button>
        </div>
        <div id="res8" class="result"></div>
      </div>

      <!-- Pista 9 - MODIFICADA: Matem√°ticas de verdad -->
      <div class="card clue-locked" id="card9">
        <h2><span class="card-number">9</span> Matem√°ticas de verdad</h2>
        <p class="hint">Mi DNI (que te lo sabes: 79185989) √∑ 2 √ó 3 = ?</p>
        <input type="number" id="ans9" placeholder="Escribe el resultado">
        <div class="btn-group">
          <button onclick="checkAnswer(9)">Comprobar</button>
          <button class="small secondary" onclick="showHint(9)">Pista</button>
        </div>
        <div id="res9" class="result"></div>
      </div>

      <!-- Pista 10 -->
      <div class="card clue-locked" id="card10">
        <h2><span class="card-number">10</span> Destino final</h2>
        <p class="hint">Con todas las pistas resueltas, ¬øcu√°l es nuestro destino de viaje?</p>
        
        <div id="lockedOptions" class="locked-message">
          ‚è≥ Completa todas las pistas anteriores para desbloquear las opciones del destino
        </div>
        
        <div id="destinationOptions" class="options-grid" style="display: none;">
          <button class="option-btn" onclick="selectOption(10, 'Par√≠s')">Par√≠s</button>
          <button class="option-btn" onclick="selectOption(10, 'Londres')">Londres</button>
          <button class="option-btn" onclick="selectOption(10, 'Suiza')">Suiza</button>
          <button class="option-btn" onclick="selectOption(10, 'Tokio')">Tokio</button>
        </div>
        
        <div id="res10" class="result"></div>
      </div>
    </div>

    <footer>
      <p>Consejo: Cada pista correcta desbloquea la siguiente. Si te atascas, usa los botones de pista.</p>
      <p>¬°El destino final ser√° una sorpresa!</p>
    </footer>
  </div>

  <!-- Modal para felicitaciones de cada pregunta -->
  <div class="modal" id="successModal">
    <div class="ticket" role="dialog" aria-modal="true">
      <div id="successEmoji" class="emoji">üéâ</div>
      <h2 id="successTitle">¬°Correcto!</h2>
      <h3 id="successQuestion">Pregunta completada</h3>
      <div id="successMessage" class="progress-text">
        ¬°Muy bien! Has acertado la respuesta.
      </div>
      <div id="destinationHint" class="destination-hint">
        ¬øD√≥nde iremos...? ‚úàÔ∏è
      </div>
      <div id="progressMessage" class="progress-text">
        Ya te va quedando menos para descubrirlo...
      </div>
      <div style="margin-top:20px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap;">
        <button onclick="closeSuccessModal()">Continuar</button>
      </div>
    </div>
  </div>

  <!-- Modal final de destino -->
  <div class="modal" id="finalModal">
    <div class="ticket" role="dialog" aria-modal="true">
      <div class="emoji">‚úàÔ∏è</div>
      <h2>¬°ENHORABUENA NAGORE!</h2>
      <h3>Has completado todas las pistas</h3>
      <div class="big">Tu destino sorpresa es:</div>
      <div class="big" style="color:#3b82f6; font-size:32px;">LONDRES</div>
      <div class="emoji" style="font-size:36px;">üá¨üáß‚ú®</div>
      <p style="margin:20px 0;">Prep√°rate para explorar esta incre√≠ble ciudad llena de historia, cultura y diversi√≥n.</p>
      <p>¬°Big Ben, el London Eye, Buckingham Palace y mucho m√°s te esperan!</p>
      <div style="margin-top:24px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap;">
        <button onclick="closeFinalModal()">¬°Qu√© emoci√≥n!</button>
        <button class="secondary" onclick="shareResult()">Compartir</button>
      </div>
    </div>
  </div>

  <script>
    // Estado del juego
    const gameState = {
      unlocked: 1,
      solvedCount: 0,
      answers: {
        1: "15",
        2: "cureta",
        3: "Roma",
        4: "azul", // Adivinanza del color
        5: "bolsa periodontal",
        6: "63", // 6 x 7 (incorrecto a prop√≥sito)
        7: "ProTaper",
        8: "airbus a330",
        9: "118778983.5", // 79185989 √∑ 2 √ó 3
        10: "Londres"
      },
      hints: {
        1: "Piensa en el d√≠a del mes",
        2: "Es un instrumento de raspado en odontolog√≠a",
        3: "Es la ciudad m√°s famosa de Italia",
        4: "Es el color del cielo en un d√≠a soleado",
        5: "Es una condici√≥n patol√≥gica en periodoncia",
        6: "6 multiplicado por 7... pero espera, ¬øes realmente 42?",
        7: "Es un sistema de instrumentaci√≥n endod√≥ntica",
        8: "Es un avi√≥n bimotor de fuselaje ancho",
        9: "79185989 √∑ 2 = 39592994.5, luego √ó 3",
        10: "Piensa en qu√© ciudad te gustar√≠a visitar"
      },
      successMessages: {
        1: ["¬°Primer paso completado!", "¬°Buena memoria!", "El comienzo perfecto..."],
        2: ["¬°Excelente!", "Sab√≠a que lo sabr√≠as...", "¬øOdont√≥loga o fake? ¬°Definitivamente odont√≥loga!"],
        3: ["¬°Geograf√≠a impecable!", "¬øA que sab√≠as esta?", "Cada vez m√°s cerca..."],
        4: ["¬°Colores dominados!", "Muy observadora...", "El puzzle se va completando..."],
        5: ["¬°Periodoncia a la vista!", "Vaya profesional...", "La emoci√≥n va en aumento..."],
        6: ["¬°Matem√°ticas extremas superadas!", "¬ø6x7? ¬°Claro que es 63!", "Ya casi est√°..."],
        7: ["¬°Endodoncia en estado puro!", "Esa la ten√≠as que saber...", "Casi descubres el destino..."],
        8: ["¬°Aviones identificados!", "Al pesao le va a encantar...", "El misterio se desvela..."],
        9: ["¬°Matem√°ticas de verdad dominadas!", "¬°Vaya c√°lculo!", "¬°√öltima antes del destino final!"],
        10: ["¬°DESTINO ENCONTRADO!", "¬°LO HAS LOGRADO!", "¬°LA AVENTURA COMIENZA!"]
      },
      progressMessages: [
        "¬°Ya llevas 1 de 10! ¬øD√≥nde iremos...?",
        "¬°2 de 10 completados! El misterio contin√∫a...",
        "¬°3 de 10! Cada paso te acerca m√°s al destino",
        "¬°4 de 10! La intriga va en aumento ‚úàÔ∏è",
        "¬°Mitad del camino! 5 de 10 superados",
        "¬°6 de 10! El destino se acerca...",
        "¬°7 de 10! Ya casi lo descubres",
        "¬°8 de 10! Muy pocas pistas faltan",
        "¬°9 de 10! ¬°La √∫ltima antes del gran secreto!",
        "¬°10 de 10! ¬°DESTINO REVELADO!"
      ]
    };

    // Calcular resultado de la pregunta 9
    const dni = 79185989;
    const resultadoP9 = (dni / 2) * 3;
    gameState.answers[9] = resultadoP9.toString();

    // Inicializar
    document.addEventListener('DOMContentLoaded', function() {
      markProgress(1);
      document.getElementById('ans1').focus();
    });

    // Funciones de utilidad
    function markProgress(n) {
      for (let i = 1; i <= n; i++) {
        document.getElementById('p' + i).classList.add('on');
      }
    }

    function unlockCard(n) {
      if (n <= 10) {
        const card = document.getElementById('card' + n);
        card.classList.remove('clue-locked');
        card.classList.add('unlocked');
        gameState.unlocked = Math.max(gameState.unlocked, n);
        
        // Enfocar el input de la siguiente tarjeta si existe
        setTimeout(() => {
          const nextInput = document.getElementById('ans' + (n + 1));
          if (nextInput) nextInput.focus();
        }, 300);
      }
    }

    function markSolved(n) {
      const card = document.getElementById('card' + n);
      card.classList.remove('unlocked');
      card.classList.add('solved');
      gameState.solvedCount++;
      
      // Si todas las preguntas excepto la 10 est√°n resueltas, mostrar opciones de destino
      if (gameState.solvedCount >= 9 && n !== 10) {
        showDestinationOptions();
      }
    }

    function showDestinationOptions() {
      const lockedMsg = document.getElementById('lockedOptions');
      const options = document.getElementById('destinationOptions');
      
      if (lockedMsg && options) {
        lockedMsg.style.display = 'none';
        options.style.display = 'grid';
      }
    }

    function clearResult(id) {
      const res = document.getElementById('res' + id);
      res.textContent = '';
      res.className = 'result';
      res.style.display = 'none';
    }

    function showSuccessModal(questionNumber) {
      const emojis = ["üéâ", "‚úÖ", "‚ú®", "‚≠ê", "üèÜ", "üí´", "üåü", "üéä", "üî•", "üíØ"];
      const randomEmoji = emojis[questionNumber - 1] || emojis[Math.floor(Math.random() * emojis.length)];
      
      const successMessages = gameState.successMessages[questionNumber];
      const randomMessage = successMessages[Math.floor(Math.random() * successMessages.length)];
      
      document.getElementById('successEmoji').textContent = randomEmoji;
      document.getElementById('successTitle').textContent = `¬°Pregunta ${questionNumber} completada!`;
      document.getElementById('successQuestion').textContent = randomMessage;
      document.getElementById('progressMessage').textContent = gameState.progressMessages[questionNumber - 1];
      
      if (questionNumber === 10) {
        document.getElementById('destinationHint').innerHTML = "¬°DESTINO ENCONTRADO!";
      } else {
        document.getElementById('destinationHint').innerHTML = "¬øD√≥nde iremos...? ‚úàÔ∏è";
      }
      
      document.getElementById('successModal').classList.add('show');
    }

    function showFinalModal() {
      document.getElementById('finalModal').classList.add('show');
    }

    // Funciones de comprobaci√≥n
    function checkAnswer(id) {
      const input = document.getElementById('ans' + id);
      const value = input ? input.value.trim().toLowerCase() : '';
      
      if (!value) {
        showResult(id, 'Por favor, escribe una respuesta', false);
        return;
      }
      
      let expected = gameState.answers[id].toLowerCase();
      
      // Aceptar variaciones para ciertas respuestas
      if (id === 5) {
        if (value.includes('bolsa') && value.includes('periodontal')) {
          clearResult(id);
          showSuccess(id);
          return;
        }
      } else if (id === 8) {
        if (value.includes('airbus') && value.includes('330')) {
          clearResult(id);
          showSuccess(id);
          return;
        }
      } else if (id === 2) {
        if (value === 'cureta') {
          clearResult(id);
          showSuccess(id);
          return;
        }
      } else if (id === 4) {
        // Para "azul" aceptar tambi√©n "azul" exacto
        if (value === 'azul') {
          clearResult(id);
          showSuccess(id);
          return;
        }
      } else if (id === 6) {
        // Para la pregunta 6, aceptar solo "63" (el error intencionado)
        if (value === '63') {
          clearResult(id);
          showSuccess(id);
          return;
        }
      } else if (id === 9) {
        // Para la pregunta 9, aceptar el resultado exacto o aproximado
        const numValue = parseFloat(value.replace(',', '.'));
        const expectedNum = parseFloat(expected);
        // Aceptar si la diferencia es menor a 0.1 (para tolerar errores de redondeo)
        if (Math.abs(numValue - expectedNum) < 0.1) {
          clearResult(id);
          showSuccess(id);
          return;
        }
      }
      
      if (value === expected) {
        clearResult(id);
        showSuccess(id);
      } else {
        showResult(id, 'Respuesta incorrecta. Intenta de nuevo.', false);
      }
    }

    function selectOption(id, option) {
      const normalizedOption = option.toLowerCase();
      const expected = gameState.answers[id].toLowerCase();
      
      if (normalizedOption === expected) {
        clearResult(id);
        showSuccess(id);
      } else {
        showResult(id, 'No es la opci√≥n correcta. Prueba otra.', false);
      }
    }

    function showSuccess(id) {
      markSolved(id);
      if (id < 10) {
        unlockCard(id + 1);
        markProgress(id + 1);
      }
      
      // Mostrar modal de felicitaci√≥n
      setTimeout(() => {
        showSuccessModal(id);
      }, 300);
      
      // Si es la pregunta 10, mostrar modal final despu√©s de un breve retraso
      if (id === 10) {
        setTimeout(() => {
          closeSuccessModal();
          setTimeout(showFinalModal, 300);
        }, 2000);
      }
    }

    function showResult(id, message, isSuccess) {
      const res = document.getElementById('res' + id);
      res.textContent = message;
      res.className = 'result ' + (isSuccess ? 'success' : 'error');
      res.style.display = 'block';
    }

    function showHint(id) {
      alert(gameState.hints[id]);
    }

    // Modal functions
    function closeSuccessModal() {
      document.getElementById('successModal').classList.remove('show');
    }

    function closeFinalModal() {
      document.getElementById('finalModal').classList.remove('show');
    }

    function shareResult() {
      if (navigator.share) {
        navigator.share({
          title: '¬°He completado la yincana sorpresa!',
          text: 'Descubr√≠ que mi destino secreto es Londres ‚úàÔ∏è',
          url: window.location.href
        });
      } else {
        alert('¬°Comparte la noticia! Mi destino sorpresa es LONDRES ‚úàÔ∏è');
      }
    }

    // Permitir Enter para enviar respuestas
    for (let i = 1; i <= 9; i++) {
      const input = document.getElementById('ans' + i);
      if (input) {
        input.addEventListener('keydown', function(e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            checkAnswer(i);
          }
        });
      }
    }
  </script>
</body>
</html>
